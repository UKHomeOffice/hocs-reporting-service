-- noinspection SqlNoDataSourceInspectionForFile

CREATE TABLE IF NOT EXISTS current_properties
(
  id                                       BIGSERIAL PRIMARY KEY,
  msg_uuid                                 TEXT      NOT NULL,
  msg_timestamp                            TIMESTAMP NOT NULL,
  case_reference                           TEXT      NOT NULL,
  acpo_consultation                        BOOLEAN,
  advice                                   TEXT,
  allocate_target                          TIMESTAMP,
  allocate_to_responder_target             TIMESTAMP,
  answering_minister                       TEXT,
  appellant                                TEXT,
  applicant_address_line1                  TEXT,
  applicant_address_line2                  TEXT,
  applicant_address_line3                  TEXT,
  applicant_country                        TEXT,
  applicant_email                          TEXT,
  applicant_forename                       TEXT,
  applicant_postcode                       TEXT,
  applicant_surname                        TEXT,
  applicant_telephone                      TEXT,
  applicant_title                          TEXT,
  arriving_date_in_uk                      TIMESTAMP,
  assigned_team                            TEXT,
  assigned_unit                            TEXT,
  assigned_user                            TEXT,
  auto_created_case                        BOOLEAN,
  bring_up_date                            TIMESTAMP,
  cabinet_office_consultation              BOOLEAN,
  case_ref                                 TEXT,
  case_response_deadline                   TIMESTAMP,
  case_status                              TEXT,
  case_task                                TEXT,
  channel                                  TEXT,
  comment_count                            INT,
  complex                                  BOOLEAN,
  consent_attached                         BOOLEAN,
  correspondence_type                      TEXT,
  correspondent_address_line1              TEXT,
  correspondent_address_line2              TEXT,
  correspondent_address_line3              TEXT,
  correspondent_country                    TEXT,
  correspondent_email                      TEXT,
  correspondent_forename                   TEXT,
  correspondent_postcode                   TEXT,
  correspondent_surname                    TEXT,
  correspondent_telephone                  TEXT,
  correspondent_title                      TEXT,
  corresponding_name                       TEXT,
  countries_to_be_travelled_through        TEXT,
  country_of_destination                   TEXT,
  created                                  TIMESTAMP,
  creator                                  TEXT,
  date_of_letter                           TIMESTAMP,
  date_received                            TIMESTAMP,
  defer_due_to                             TEXT,
  delivery_number                          TEXT,
  delivery_type                            TEXT,
  departure_date_from_uk                   TIMESTAMP,
  dispatched_date                          TIMESTAMP,
  dispatch_target                          TIMESTAMP,
  document_added                           TEXT,
  draft_date                               TIMESTAMP,
  draft_response_target                    TIMESTAMP,
  enforcement_notice_deadline              TIMESTAMP,
  enforcement_notice_needed                BOOLEAN,
  examiner_security_check                  BOOLEAN,
  fee_included                             BOOLEAN,
  final_approval_target                    TIMESTAMP,
  foi_disclosure                           BOOLEAN,
  foi_is_eir                               BOOLEAN,
  foi_minister_sign_off                    BOOLEAN,
  hard_copy_received                       TEXT,
  hmpo_application_number                  TEXT,
  hmpo_complaint_outcome                   TEXT,
  hmpo_passport_number                     TEXT,
  hmpo_refund_amount                       TEXT,
  hmpo_refund_decision                     TEXT,
  hmpo_response                            TEXT,
  ho_case_officer                          TEXT,
  ho_joined                                BOOLEAN,
  home_secretary_reply                     BOOLEAN,
  ico_complaint_officer                    TEXT,
  ico_outcome                              TEXT,
  ico_outcome_date                         TIMESTAMP,
  ico_reference                            TEXT,
  individual_household                     BOOLEAN,
  is_grouped_master                        BOOLEAN,
  is_grouped_slave                         BOOLEAN,
  is_linked_case                           BOOLEAN,
  leaders_address_aboard                   TEXT,
  markup_decision                          TEXT,
  markup_minister                          TEXT,
  markup_team                              TEXT,
  markup_topic                             TEXT,
  markup_unit                              TEXT,
  member                                   TEXT,
  minutes_collated                         TEXT,
  modified                                 TIMESTAMP,
  modifier                                 TEXT,
  mp_ref                                   TEXT,
  name                                     TEXT,
  new_information_released                 BOOLEAN,
  node_dbid                                TEXT,
  node_uuid                                TEXT,
  nslg_consultation                        BOOLEAN,
  number_of_children                       INT,
  office_of_origin                         TEXT,
  ogd_name                                 TEXT,
  organisation                             TEXT,
  original_drafter_team                    TEXT,
  original_drafter_unit                    TEXT,
  original_drafter_user                    TEXT,
  other_countries_to_be_visited            TEXT,
  owner_updated_datetime                   TIMESTAMP,
  parly_dispatch                           BOOLEAN,
  party_leader_deputy_last_name            TEXT,
  party_leader_deputy_other_names          TEXT,
  party_leader_deputy_passport_issued_at   TEXT,
  party_leader_deputy_passport_issued_on   TIMESTAMP,
  party_leader_deputy_passport_number      TEXT,
  party_leader_last_name                   TEXT,
  party_leader_other_names                 TEXT,
  party_leader_passport_issued_at          TEXT,
  party_leader_passport_issued_on          TIMESTAMP,
  party_leader_passport_number             TEXT,
  pit_extension                            BOOLEAN,
  pit_letter_sent_date                     TIMESTAMP,
  pit_qualified_exemptions                 TEXT,
  po_target                                TIMESTAMP,
  pq_api_created_case                      BOOLEAN,
  priority                                 BOOLEAN,
  reply_to_address_line1                   TEXT,
  reply_to_address_line2                   TEXT,
  reply_to_address_line3                   TEXT,
  reply_to_applicant                       BOOLEAN,
  reply_to_correspondent                   BOOLEAN,
  reply_to_country                         TEXT,
  reply_to_email                           TEXT,
  reply_to_name                            TEXT,
  reply_to_number_ten_copy                 BOOLEAN,
  reply_to_postcode                        TEXT,
  reply_to_telephone                       TEXT,
  responder_hub_target                     TEXT,
  response_date                            TIMESTAMP,
  return_case_at                           BOOLEAN,
  returned_count                           INT,
  reviewed_by_perm_sec                     BOOLEAN,
  reviewed_by_spads                        BOOLEAN,
  round_robin                              BOOLEAN,
  round_robin_advice_consultation          BOOLEAN,
  royals_consultation                      BOOLEAN,
  scs_approval_target                      TIMESTAMP,
  sec_correspondent_consent_attached       TEXT,
  sec_correspondent_type_of_representative TEXT,
  secondary_correspondent_address_line1    TEXT,
  secondary_correspondent_address_line2    TEXT,
  secondary_correspondent_address_line3    TEXT,
  secondary_correspondent_email            TEXT,
  secondary_correspondent_forename         TEXT,
  secondary_correspondent_postcode         TEXT,
  secondary_correspondent_reply_to         BOOLEAN,
  secondary_correspondent_surname          TEXT,
  secondary_correspondent_telephone        TEXT,
  secondary_correspondent_title            TEXT,
  secondary_topic                          TEXT,
  secondary_type_of_correspondent          TEXT,
  signed_by_home_sec                       BOOLEAN,
  signed_by_lords_minister                 BOOLEAN,
  status_updated_datetime                  TIMESTAMP,
  task_updated_datetime                    TIMESTAMP,
  third_party_consent_attached             TEXT,
  third_party_correspondent_address_line1  TEXT,
  third_party_correspondent_address_line2  TEXT,
  third_party_correspondent_address_line3  TEXT,
  third_party_correspondent_country        TEXT,
  third_party_correspondent_email          TEXT,
  third_party_correspondent_forename       TEXT,
  third_party_correspondent_organisation   TEXT,
  third_party_correspondent_postcode       TEXT,
  third_party_correspondent_reply_to       BOOLEAN,
  third_party_correspondent_surname        TEXT,
  third_party_correspondent_telephone      TEXT,
  third_party_correspondent_title          TEXT,
  third_party_type_of_correspondent        TEXT,
  third_party_type_of_representative       TEXT,
  tribunal_outcome                         TEXT,
  tribunal_outcome_date                    TIMESTAMP,
  tsol_rep                                 TEXT,
  type_of_correspondent                    TEXT,
  type_of_representative                   TEXT,
  urn_suffix                               TEXT,

  CONSTRAINT current_properties_id_idempotent UNIQUE (case_reference)
);

CREATE INDEX idx_current_properties_case_reference ON current_properties (case_reference);
CREATE INDEX idx_current_properties_timestamp ON current_properties (msg_timestamp);
CREATE INDEX idx_current_properties_corr_type ON current_properties (correspondence_type);